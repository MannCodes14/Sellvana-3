<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Commerce Dashboard</title>
    <style>
        /* Default link style */
        .sidebar a {
            padding: 10px;
            text-decoration: none;
            color: black;
            display: block;
            border-radius: 5px;
        }

        /* Active link style */
        .sidebar a.active {
            background: green;
            color: white;
        }
    </style>
</head>
<body style="margin: 0; font-family: Arial, sans-serif; background: #f8f9fa;">

    <!-- Sidebar -->
    <div class="sidebar" style="width: 250px; height: 100vh; background: white; position: fixed; padding: 20px; box-shadow: 2px 0 5px rgba(0,0,0,0.1);">
        <div style="font-size: 20px; font-weight: bold; margin-bottom: 20px; color: #d85a2b;">
            <a href="{% url 'core:index' %}" style="text-decoration: none;"><span style="color: green;">e-</span>commerce</a>
        </div>
        <div style="display: flex; flex-direction: column;">
            <a href="{% url 'useradmin:dashboard' %}" class="menu-item" data-page="dashboard">Dashboard</a>
            <a href="{% url 'useradmin:products' %}" class="menu-item" data-page="products">Products</a>
            <a href="#" class="menu-item" data-page="orders">Orders</a>
            <a href="#" class="menu-item" data-page="shop">Shop Page</a>
            <a href="#" class="menu-item" data-page="add_product">Add Product</a>
            <a href="#" class="menu-item" data-page="reviews">Reviews</a>
            <a href="#" class="menu-item" data-page="settings">Settings</a>
            <a href="#" class="menu-item" data-page="change_password">Change Password</a>
            <a href="#" style="color: red;">Logout</a>
        </div>
    </div>

    <!-- Main Content -->
    {% block content %}
    {% endblock %}

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let menuItems = document.querySelectorAll(".menu-item");

            // Retrieve the last selected page from localStorage
            let activePage = localStorage.getItem("activePage");

            if (activePage) {
                menuItems.forEach(item => {
                    if (item.getAttribute("data-page") === activePage) {
                        item.classList.add("active");
                    }
                });
            }

            menuItems.forEach(item => {
                item.addEventListener("click", function () {
                    // Store the selected page in localStorage
                    localStorage.setItem("activePage", this.getAttribute("data-page"));
                });
            });
        });
    </script>

</body>
</html>
