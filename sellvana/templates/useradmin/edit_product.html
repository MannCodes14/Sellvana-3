{% extends 'useradmin/base.html' %}
{% load static %}
{% load humanize %}
{{ form.media }}

{% block content %}

<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="{% static 'bootstrap.min.css' %}" rel="stylesheet">
<link href="{% static 'custom.css' %}" rel="stylesheet">

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card p-4 shadow-sm">
                <h3 class="mb-3">Update Product</h3>

                <!-- Display Form Errors -->
                {% if form.errors %}
                <div class="alert alert-danger">
                    <ul>
                        {% for field, errors in form.errors.items %}
                            {% for error in errors %}
                                <li><strong>{{ field|title }}:</strong> {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <form method="POST" enctype="multipart/form-data" action="">
                    {% csrf_token %}

                    <div class="row">
                        <!-- Product Title -->
                        <div class="col-lg-6">
                            <div class="mb-4">
                                <label class="form-label">Product Title</label>
                                {{ form.title }}
                                <span class="text-danger">{{ form.title.errors }}</span>
                            </div>
                        </div>

                        <!-- Category -->
                        <div class="col-lg-6">
                            <div class="mb-4">
                                <label class="form-label">Category</label>
                                {{ form.category }}
                                <span class="text-danger">{{ form.category.errors }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="mb-4">
                        <label class="form-label">Full Description</label>
                        {{ form.description }}
                        <span class="text-danger">{{ form.description.errors }}</span>
                    </div>

                    <div class="row">
                        <!-- Selling Price -->
                        <div class="col-lg-4">
                            <div class="mb-4">
                                <label class="form-label">Selling Price</label>
                                {{ form.price }}
                                <span class="text-danger">{{ form.price.errors }}</span>
                            </div>
                        </div>

                        <!-- Old Price -->
                        <div class="col-lg-4">
                            <div class="mb-4">
                                <label class="form-label">Old Price</label>
                                {{ form.old_price }}
                                <span class="text-danger">{{ form.old_price.errors }}</span>
                            </div>
                        </div>

                        <!-- Stock -->
                        <div class="col-lg-4">
                            <div class="mb-4">
                                <label class="form-label">Stock</label>
                                {{ form.stock_count }}
                                <span class="text-danger">{{ form.stock_count.errors }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Product Type -->
                        <div class="col-lg-6">
                            <div class="mb-4">
                                <label class="form-label">Type of Product</label>
                                {{ form.type }}
                                <span class="text-danger">{{ form.type.errors }}</span>
                            </div>
                        </div>

                        <!-- Product Life -->
                        <div class="col-lg-6">
                            <div class="mb-4">
                                <label class="form-label">Product Life</label>
                                {{ form.life }}
                                <span class="text-danger">{{ form.life.errors }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Manufacturing Date -->
                        <div class="col-lg-6">
                            <div class="mb-4">
                                <label class="form-label">Manufacturing Date</label>
                                {{ form.mfd }}
                                <span class="text-danger">{{ form.mfd.errors }}</span>
                            </div>
                        </div>

                        <!-- Tags -->
                        <div class="col-lg-6">
                            <div class="mb-4">
                                <label class="form-label">Tags</label>
                                {{ form.tags }}
                                <span class="text-danger">{{ form.tags.errors }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label">Digital Product</label>
                        {{ form.digital }}
                        <small class="text-muted ms-2">Check if this is a digital product</small>
                        <span class="text-danger">{{ form.digital.errors }}</span>
                    </div>

                    <!-- Image Upload -->
                    <div class="mb-4">
                        <label class="form-label">Product Image</label>

                        <!-- Image Preview -->
                        <div class="mb-3">
                            <img id="preview" class="img-fluid" src="{{product.image.url}}" alt="Product Image">
                        {{ form.image }}
                        <span class="text-danger">{{ form.image.errors }}</span>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn btn-success w-100">Publish Product</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}
